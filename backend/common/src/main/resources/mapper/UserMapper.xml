<?xml version="1.0" encoding="utf-8" ?><!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zxiaosi.common.mapper.UserMapper">
    <!-- id: sql语句的唯一标识 -->
    <!-- resultType: 返回值类型 -->
    <!-- parameterType: 参数类型 -->
    <!-- 实体类字段和数据库一致直接用resultType -->

    <!-- 根据 用户id 获取用户信息 -->
    <select id="getUserByUserId" parameterType="integer" resultType="User">
        select *
        from user
        where user.id = #{userId}
          and user.is_deleted = 0
    </select>

    <!-- 根据 openid 获取用户信息  -->
    <select id="getUserByOpenId" parameterType="string" resultType="User">
        select *
        from user
        where open_id = #{openId}
          and user.is_deleted = 0
    </select>

    <!-- 插入用户信息 -->
    <insert id="insertUser" parameterType="User" useGeneratedKeys="true" keyProperty="id">
        insert into user (username, avatar, phone, password, open_id)
        values (#{username}, #{avatar}, #{phone}, #{password}, #{openId})
    </insert>

</mapper>